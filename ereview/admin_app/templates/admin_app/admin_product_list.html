{% extends 'admin_app/base.html' %}
{% load static %}

{% block extra_css %}
<style>
   .product-img {
   width: 100%;
   height: 250px; /* Fixed height for uniformity */
   object-fit: contain; /* Changed from 'cover' to 'contain' */
   border-top-left-radius: 10px;
   border-top-right-radius: 10px;
   padding: 10px; /* Added padding around the image */
   background-color: #f9f9f9; /* Light background for image area */
}

.product-card {
   display: flex;
   flex-direction: column;
   justify-content: space-between;
   height: 100%;
   min-height: 420px; /* Ensures consistent height */
   max-height: 450px; /* Added maximum height */
   border-radius: 10px;
   overflow: hidden;
   transition: all 0.3s ease-in-out;
}
</style>
{% endblock %}

{% block content %}

<!-- Section: Latest Products -->
<div class="whyschose">
   <div class="container">
      <div class="row">
         <div class="col-md-7 offset-md-3">
            <div class="title">
               <h2>Latest <strong class="black">Products</strong></h2>
               <span>Honest insights from real users!</span>
            </div>
         </div>
      </div>
   </div>
</div>

<!-- Section: Product Management -->
<div class="choose_bg">
   <div class="container">
      <div class="white_bg">
         <div class="row">
            <!-- Sidebar (Optional) -->
            <div class="col-xl-3 col-lg-3 col-md-6 col-sm-12">
               <div class="for_box">
                  <!-- Sidebar content if needed -->
               </div>
            </div>

            <!-- Product List -->
            <div class="col-xl-9 col-lg-9 col-md-12 col-sm-12">
               <div class="product">
                  <div class="container">
                     <div class="row">
                        <div class="col-md-12">
                           <div class="title">
                              <span>Manage your products below</span>
                           </div>
                        </div>
                     </div>
                     <div class="row">
                        {% for product in products %}
<div class="col-xl-3 col-lg-4 col-md-6 col-sm-12 mb-4">
   <div class="card product-card shadow-sm border-0 h-100" style="transition: all 0.2s ease-in-out; border-radius: 8px;">
      <div style="height: 220px; display: flex; align-items: center; justify-content: center; background-color: #f8f9fa; border-top-left-radius: 8px; border-top-right-radius: 8px; overflow: hidden;">
         <img 
            src="{{ product.image.url }}" 
            alt="{{ product.name }}" 
            style="max-height: 200px; width: auto; max-width: 100%; object-fit: contain; padding: 1rem;"
            onerror="this.src=fallbackImageUrl;">
      </div>
      <div class="card-body d-flex flex-column" style="padding: 1rem;">
         <h5 class="card-title text-dark fw-bold mb-1" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">{{ product.name }}</h5>
         <p class="card-text fw-bold mb-3" style="color: #0d6efd;">â‚¹{{ product.price }}</p>
         <div class="mt-auto">
            <div style="display: flex; width: 100%;">
               <a href="{% url 'edit_product' product.id %}" class="btn btn-sm btn-primary" style="flex-grow: 1; border-radius: 4px; padding: 0.375rem 0.75rem; margin-right: 0.25rem;">
                  <i class="fas fa-edit-alt"></i> Edit
               </a>
               <a href="{% url 'delete_product' product.id %}" class="btn btn-sm btn-outline-danger" style="flex-grow: 1; border-radius: 4px; padding: 0.375rem 0.75rem;">
                  <i class="fas fa-trash-alt"></i> Delete
               </a>
            </div>
         </div>
      </div>
   </div>
</div>
{% empty %}

<div class="col-12 text-center py-5">
   <p class="text-muted fs-5">No products available.</p>
   <a href="{% url 'add_product' %}" class="btn btn-primary mt-2">
      <i class="fa fa-plus"></i> Add New Product
   </a>
</div>
{% endfor %}
                        
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>

{% endblock %}
